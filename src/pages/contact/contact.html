<ion-header>
  <ion-navbar>
    <ion-title>
      Contact
    </ion-title>
  </ion-navbar>
</ion-header>

<ion-content>
  <ion-list *ngIf="!session">
    <form (ngSubmit)="joinSession()">
      <ion-item>
        <ion-label color="primary" floating>Participant</ion-label>
        <ion-input [(ngModel)]="myUserName" name="participant"></ion-input>
      </ion-item>

      <ion-item>
        <ion-label color="primary" floating>Session</ion-label>
        <ion-input [(ngModel)]="mySessionId" name="session"></ion-input>
      </ion-item>

      <button ion-button margin type="submit">Join</button>
    </form>
  </ion-list>



  <ion-list *ngIf="session" class="session">
    <button ion-button padding color="danger" small float-right (click)="leaveSession()">Leave Session</button>

    <div *ngIf="publisher" class="publisher-stream">
      <user-video [streamManager]="publisher"></user-video>
    </div>

    <div *ngFor="let sub of subscribers" class="subscribers-stream">
      <ion-badge item-end> {{ getNicknameTag(sub) }} </ion-badge>
      <user-video [streamManager]="sub"></user-video>
    </div>
  </ion-list>
</ion-content>
